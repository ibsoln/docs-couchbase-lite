// common-p2psync-websocket-manage-tls-id.adoc
// Managing TLS Identities for P2P Sync over Websockets
//

// BEGIN CONTENT
[abstract]
{description}
{param-abstract}

[.pane__frames]
== Overview
[.no-color]
.{empty}
*  This describes the configuration and management of TLS identities

[.narrow]
.Key Concepts
* API: {url-api-class-tlsidentity}
* {xref-cbl-pg-p2psync-websocket}

== Creating TLS Identity

There are couple of options by which TLS Identity is created:

* You can use the <<anonymous-cert,anonymous self-signed cert>> auto-generated by Couchbase Lite
* You can <<importing-a-cert,import a cert>> to be bundled with the app and-or stored in the keychain

//include::{root-partials}p2p-api-tlsid-{param-platform}.adoc[tag=method-create]

== Use Anonymous Cert

Anonymous certification uses the self signed cert auto-generated by Couchbase Lite when TLS is enabled, but no TLSIdentity is provided.

[source]
----
listenerConfig.disableTLS  = false // Use with anonymous self signed cert
listenerConfig.tlsIdentity = nil
----

== Import a Cert

Import a cert that can be bundled with the app and-or added to the keychain.

. First check the keychain to see if the identity already exists
+
--
[source, {source-language}]
----
include::{snippet-p2psync-ws}[tag=p2p-tlsid-check-keychain, indent=0]
----
--

. Check for an existing resource bundle
+
--
[source, {source-language}]
----
include::{snippet-p2psync-ws}[tag=p2p-tlsid-check-bundled, indent=0]
----
--

. Import from an existing resource bundle
+
--
[source, {source-language}]
----
include::{snippet-p2psync-ws}[tag=p2p-tlsid-import-from-bundled, indent=0]
----
--

. Store imported identity in keychain
+
--
[source, {source-language}]
----
include::{snippet-p2psync-ws}[tag=p2p-tlsid-store-in-keychain, indent=0]
----
--

. Use keychain identity in config
+
--
[source, {source-language}]
----
include::{snippet-p2psync-ws}[tag=p2p-tlsid-return-id-from-keychain, indent=0]
----
--


== Delete TLS Identity

include::{root-partials}p2p-api-tlsid-{param-platform}.adoc[tag=method-delete]

// END CONTENT